{
  "db_name": "PostgreSQL",
  "query": "\n            SELECT\n                t.name AS thread_name,\n                t.id AS thread_id,\n                p.content AS post,\n                p.id AS post_id,\n                p.created_at AS post_created_at,\n                p.created_by_id AS post_created_by_id,\n                u.username AS post_created_by_username,\n                s.name AS sub_category_name,\n                s.id AS sub_category_id,\n                c.name AS category_name,\n                c.id AS category_id\n            FROM forum_threads t\n            JOIN LATERAL (\n                SELECT p.*\n                FROM forum_posts p\n                WHERE p.forum_thread_id = t.id\n                ORDER BY p.created_at DESC\n                LIMIT 1\n            ) p ON TRUE\n            JOIN users u ON u.id = p.created_by_id\n            JOIN forum_sub_categories s ON s.id = t.forum_sub_category_id\n            JOIN forum_categories c ON c.id = s.forum_category_id\n\n            WHERE $1::TEXT IS NULL OR t.name ILIKE '%' || $1 || '%'\n\n            ORDER BY p.created_at DESC\n\n            LIMIT $2 OFFSET $3;\n            ",
  "describe": {
    "columns": [
      {
        "ordinal": 0,
        "name": "thread_name",
        "type_info": "Text"
      },
      {
        "ordinal": 1,
        "name": "thread_id",
        "type_info": "Int8"
      },
      {
        "ordinal": 2,
        "name": "post",
        "type_info": "Text"
      },
      {
        "ordinal": 3,
        "name": "post_id",
        "type_info": "Int8"
      },
      {
        "ordinal": 4,
        "name": "post_created_at",
        "type_info": "Timestamptz"
      },
      {
        "ordinal": 5,
        "name": "post_created_by_id",
        "type_info": "Int4"
      },
      {
        "ordinal": 6,
        "name": "post_created_by_username",
        "type_info": "Varchar"
      },
      {
        "ordinal": 7,
        "name": "sub_category_name",
        "type_info": "Text"
      },
      {
        "ordinal": 8,
        "name": "sub_category_id",
        "type_info": "Int4"
      },
      {
        "ordinal": 9,
        "name": "category_name",
        "type_info": "Text"
      },
      {
        "ordinal": 10,
        "name": "category_id",
        "type_info": "Int4"
      }
    ],
    "parameters": {
      "Left": [
        "Text",
        "Int8",
        "Int8"
      ]
    },
    "nullable": [
      false,
      false,
      false,
      false,
      false,
      false,
      false,
      false,
      false,
      false,
      false
    ]
  },
  "hash": "ef8cec831ccca015b239b2b50b61caf54b86619d0edbe2c68df464ea85174b24"
}
